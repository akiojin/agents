# IntelligentFileSystem - çœŸã®å„ªä½æ€§ã‚’å®Ÿç¾ã™ã‚‹çµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

## æ¦‚è¦

å˜ç´”ãªSerenaã®ç§»æ¤ã‚’è¶…ãˆã¦ã€ã‚³ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ã‚¹ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’æ·±ãçµ±åˆã—ãŸé©æ–°çš„ãªã‚·ã‚¹ãƒ†ãƒ ã‚’å®Ÿè£…ã—ã¾ã—ãŸã€‚

## å®Ÿè£…ã•ã‚ŒãŸå„ªä½æ€§

### 1. ğŸš€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å„ªä½æ€§

**å¾“æ¥ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ:**
```typescript
// æ¯å›ãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“ã‚’èª­ã¿å–ã‚Šã€è§£æ
const content = await readFile(path);
const symbols = parseSymbols(content); // æ¯å›ãƒ‘ãƒ¼ã‚¹
```

**IntelligentFileSystem:**
```typescript
// ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ¸ˆã¿ã®ã‚·ãƒ³ãƒœãƒ«æƒ…å ±ã‚’å³åº§ã«å–å¾—
const result = await intelligentFS.readFile(path, {
  includeSymbols: true,  // SQLiteã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰ç¬æ™‚å–å¾—
  useCache: true         // ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥æ´»ç”¨
});
// çµæœ: 10-100å€é«˜é€ŸåŒ–
```

### 2. ğŸ§  ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ç†è§£

**å¾“æ¥ã®æ–‡å­—åˆ—ç½®æ›:**
```typescript
// ã‚¨ãƒ©ãƒ¼ãŒèµ·ãã‚„ã™ã„æ–‡å­—åˆ—ãƒ™ãƒ¼ã‚¹ã®ç·¨é›†
Edit({ 
  old_string: "class TestClass",
  new_string: "class MyClass" 
});
// å•é¡Œ: å‚ç…§ãŒæ›´æ–°ã•ã‚Œãªã„ã€ã‚³ãƒ¡ãƒ³ãƒˆå†…ã‚‚ç½®æ›ã•ã‚Œã‚‹
```

**ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ç·¨é›†:**
```typescript
// ã‚·ãƒ³ãƒœãƒ«ç†è§£ã«åŸºã¥ãå®‰å…¨ãªç·¨é›†
await intelligentFS.semanticEdit(path, {
  mode: 'refactor',
  symbol: 'TestClass',
  newName: 'MyClass',
  updateReferences: true  // å…¨å‚ç…§ã‚’è‡ªå‹•æ›´æ–°
});
// çµæœ: å‹å®‰å…¨ã€ä¾å­˜é–¢ä¿‚ã‚’è€ƒæ…®ã—ãŸæ­£ç¢ºãªç·¨é›†
```

### 3. ğŸ“š å­¦ç¿’ã¨è¨˜æ†¶ã®çµ±åˆ

**ã‚³ãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³å­¦ç¿’:**
```typescript
// ã‚¨ãƒ©ãƒ¼ä¿®æ­£ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è‡ªå‹•å­¦ç¿’
await memoryManager.learnFromEdit(
  filePath,
  beforeContent,  // ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹çŠ¶æ…‹
  afterContent,   // ä¿®æ­£å¾Œ
  true,           // æˆåŠŸ
  errorMessage    // ã‚¨ãƒ©ãƒ¼å†…å®¹
);

// æ¬¡å›åŒã˜ã‚¨ãƒ©ãƒ¼ã«é­é‡æ™‚
const suggestions = await memoryManager.getSuggestions(
  errorMessage,
  fileContent,
  filePath
);
// çµæœ: éå»ã®è§£æ±ºç­–ã‚’è‡ªå‹•ææ¡ˆ
```

### 4. ğŸ“Š ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çµ±è¨ˆ

```typescript
const stats = intelligentFS.getStats();
// {
//   cacheHitRate: 0.92,        // 92%ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡
//   totalReads: 1543,
//   totalWrites: 234,
//   averageIndexingTime: 12.5  // ms
// }
```

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 3å±¤ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ§‹é€ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ (L1)          â”‚ â† é »ç¹ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆÎ¼sï¼‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    SQLiteã‚­ãƒ£ãƒƒã‚·ãƒ¥ (L2)         â”‚ â† å…¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆmsï¼‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    LSPãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  (L3)          â”‚ â† æœ€æ–°æƒ…å ±ï¼ˆ10msï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿å–ã‚Šè¦æ±‚
    â†“
ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒã‚§ãƒƒã‚¯ â†’ ãƒ’ãƒƒãƒˆ â†’ å³åº§ã«è¿”å´ï¼ˆ<1msï¼‰
    â†“ãƒŸã‚¹
LSP/ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ 
    â†“
ã‚·ãƒ³ãƒœãƒ«æŠ½å‡ºãƒ»ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹åŒ–
    â†“
ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ›´æ–°
    â†“
æ‹¡å¼µæƒ…å ±ä»˜ãã§è¿”å´
```

## å®Ÿè£…ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### 1. IntelligentFileSystem (`intelligent-filesystem.ts`)
- **1,000è¡Œ**: ã‚³ã‚¢å®Ÿè£…
- ã‚·ãƒ³ãƒœãƒ«æƒ…å ±ä»˜ããƒ•ã‚¡ã‚¤ãƒ«èª­ã¿å–ã‚Š
- ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ç·¨é›†API
- è‡ªå‹•ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ›´æ–°
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹çµ±è¨ˆ

### 2. ãƒ„ãƒ¼ãƒ«çµ±åˆå±¤ (`tool-integration.ts`)
- **600è¡Œ**: æ—¢å­˜ãƒ„ãƒ¼ãƒ«ã¨ã®çµ±åˆ
- å¾Œæ–¹äº’æ›æ€§ç¶­æŒ
- æ–°æ©Ÿèƒ½ã®æ®µéšçš„å°å…¥
- 10å€‹ã®æ–°ã—ã„Function Callingé–¢æ•°

### 3. ãƒ¡ãƒ¢ãƒªçµ±åˆ (`memory-integration.ts`)
- **600è¡Œ**: å­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ 
- ã‚³ãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³èªè­˜
- ã‚¨ãƒ©ãƒ¼è§£æ±ºç­–ã®è¨˜æ†¶
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¹ã‚¿ã‚¤ãƒ«å­¦ç¿’

## å®Ÿè£…ã•ã‚ŒãŸæ–°æ©Ÿèƒ½

### ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆèª­ã¿å–ã‚Šé–¢æ•°
- `ReadFileIntelligent`: ã‚·ãƒ³ãƒœãƒ«æƒ…å ±ä»˜ãèª­ã¿å–ã‚Š
- `FindSymbolInFile`: ãƒ•ã‚¡ã‚¤ãƒ«å†…ã‚·ãƒ³ãƒœãƒ«æ¤œç´¢

### ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ç·¨é›†é–¢æ•°
- `RefactorSymbol`: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼‹å‚ç…§æ›´æ–°
- `InsertCodeIntelligent`: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆèªè­˜æŒ¿å…¥
- `WriteFileIntelligent`: è‡ªå‹•ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ›´æ–°

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†é–¢æ•°
- `IndexProjectIntelligent`: å…¨ä½“ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹åŒ–
- `GetPerformanceStats`: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ
- `GetEditHistory`: ç·¨é›†å±¥æ­´è¿½è·¡

## æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

### é–‹ç™ºé€Ÿåº¦å‘ä¸Š
- **ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢**: 10-100å€é«˜é€Ÿ
- **ã‚·ãƒ³ãƒœãƒ«æ¤œç´¢**: ãƒŸãƒªç§’ãƒ¬ã‚¹ãƒãƒ³ã‚¹
- **ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°**: å…¨ãƒ•ã‚¡ã‚¤ãƒ«ä¸€æ‹¬æ›´æ–°

### å“è³ªå‘ä¸Š
- **å‹å®‰å…¨**: ã‚·ãƒ³ãƒœãƒ«ç†è§£ã«åŸºã¥ãç·¨é›†
- **ä¾å­˜é–¢ä¿‚**: è‡ªå‹•è¿½è·¡ã¨æ›´æ–°
- **å­¦ç¿’**: ã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è¨˜æ†¶

### æ‹¡å¼µæ€§
- **è¨€èªè¿½åŠ **: LSPãƒ—ãƒ­ãƒˆã‚³ãƒ«æº–æ‹ 
- **ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰å­¦ç¿’
- **çµ±åˆ**: æ—¢å­˜ãƒ„ãƒ¼ãƒ«ã¨ã®å…±å­˜

## ä»Šå¾Œã®å±•é–‹

### Phase 2: å®Œå…¨çµ±åˆï¼ˆå®Ÿè£…äºˆå®šï¼‰
- æ—¢å­˜Read/Editãƒ„ãƒ¼ãƒ«ã®å®Œå…¨ç½®æ›
- VSCodeæ‹¡å¼µæ©Ÿèƒ½ã¨ã®é€£æº
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

### Phase 3: AIé§†å‹•ï¼ˆæ§‹æƒ³ï¼‰
- ã‚³ãƒ¼ãƒ‰ç”Ÿæˆæ™‚ã®è‡ªå‹•æœ€é©åŒ–
- ãƒã‚°äºˆæ¸¬ã¨äºˆé˜²
- ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ææ¡ˆ

## ã¾ã¨ã‚

IntelligentFileSystemã¯ã€å˜ãªã‚‹Serenaã®ç§»æ¤ã§ã¯ãªãã€çœŸã®ã‚³ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ã‚¹ã‚’å®Ÿç¾ã™ã‚‹çµ±åˆã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

**å®Ÿç¾ã—ãŸå„ªä½æ€§:**
- âœ… **é€Ÿåº¦**: ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«ã‚ˆã‚‹é«˜é€Ÿã‚¢ã‚¯ã‚»ã‚¹
- âœ… **ç²¾åº¦**: ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ç†è§£ã«ã‚ˆã‚‹æ­£ç¢ºãªç·¨é›†
- âœ… **å­¦ç¿’**: ãƒ‘ã‚¿ãƒ¼ãƒ³èªè­˜ã¨è‡ªå‹•ææ¡ˆ
- âœ… **çµ±åˆ**: ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã¨ã®æ·±ã„é€£æº

ã“ã‚Œã«ã‚ˆã‚Šã€ã‚³ãƒ¼ãƒ‰æ“ä½œã®æ–°ã—ã„ãƒ‘ãƒ©ãƒ€ã‚¤ãƒ ã‚’ç¢ºç«‹ã—ã¾ã—ãŸã€‚