# AGENTS アーキテクチャ

## 概要

AGENTSは、ChromaDBをベースとした記憶システムを実装しています。このシステムは以下の主要コンポーネントから構成されています：

1. **ChromaDBクライアント** (`packages/memory/src/chroma/`)
   - ChromaDBとの接続と操作を担当
   - 記憶の保存、検索、更新、取得機能を提供

2. **シナプス結合ネットワーク** (`packages/memory/src/synaptic/`)
   - 人間の脳のシナプス結合を模倣し、記憶間の関連性を管理
   - ヘブ則学習（Hebbian Learning）を実装
   - 時間経過による記憶の減衰（忘却曲線）を考慮
   - 競合学習（Competitive Learning）を実装

3. **統合記憶システム** (`packages/memory/src/index.ts`)
   - ChromaDBとシナプスネットワークを統合
   - 記憶の保存、検索、使用、フィードバック機能を提供
   - 自動減衰機能を実装

4. **APIインターフェース** (`packages/memory/src/api/`)
   - AGENTSのツールシステムと統合するためのインターフェース
   - イベント記録、エラー解決、プロジェクト情報管理機能を提供

## 詳細設計

### ChromaDBクライアント
- ChromaDBサーバーへの接続設定を自動化（Docker環境内ではhost.docker.internal、ローカル環境ではlocalhost）
- 記憶の保存、検索、更新、取得機能を提供
- メタデータを保存し、記憶の属性（作成日時、アクセス回数、成功率など）を管理
- リトライロジックを実装し、ChromaDBサーバーへの接続失敗に対応

### シナプス結合ネットワーク
- ヘブ則学習を実装し、関連する記憶の結合強度を動的に調整
- 時間経過による記憶の減衰（忘却曲線）を考慮
- 競合学習を実装し、文脈に応じた記憶の選択が可能
- 文脈依存検索を実装し、より適切な記憶の取得が可能
- シナプス結合の強度調整は単純なヘブ則に基づいている
- アクセスパターンの学習と予測機能を実装

### 統合記憶システム
- 記憶の保存、検索、使用、フィードバック機能を一元的に管理
- 自動減衰機能により、不要な記憶の整理が可能
- 成功/失敗フィードバックをもとに記憶の品質を向上
- 記憶の重要度評価は単純な計算に基づいている

### APIインターフェース
- AGENTSのツールシステムと統合しやすい設計
- イベント記録、エラー解決、プロジェクト情報管理機能を提供
- システムの初期化処理が複雑で、エラー処理が不十分

## シナプス記憶システムの詳細

### 脳神経ネットワーク模倣
- 人間の脳の記憶形成メカニズムを模倣
- 最大3段階の記憶活性化伝播（減衰率0.7）
- Ebbinghausの忘却曲線による時間経過記憶減衰
- LTP/LTDによる記憶強度調整

### 記憶の活性化と伝播
- 記憶が活性化されると、関連する記憶も同時に活性化される
- 活性化は最大3段階まで伝播し、減衰率0.7で減少
- 活性化レベルが一定以上になると、記憶のアクセス回数が増加

### 記憶の学習と強化
- ヘブ則学習を実装し、関連する記憶の結合強度を動的に調整
- 長期増強（LTP）と長期抑制（LTD）の仕組みを導入
- 時間経過による記憶減衰（忘却曲線）を考慮

### 競合学習
- 同じ文脈内の記憶間で競合し、より適切な記憶が選択される
- 競合学習の強度は動的に調整可能

### アクセスパターン学習
- 記憶のアクセス履歴を記録し、パターンを学習
- 現在の文脈に基づいて記憶の予測を行う

## システムの初期化プロセス
1. ChromaDBクライアントの初期化
2. シナプス結合ネットワークの初期化
3. 記憶の復元（ChromaDBからすべての記憶を読み込み）
4. シナプス結合情報の復元
5. 自動減衰機能の開始

## システムの使用フロー
1. 記憶の保存: 新しい記憶をChromaDBに保存し、シナプスネットワークに追加
2. 記憶の検索: 文脈依存検索やベクトル検索で記憶を取得
3. 記憶の使用: 記憶が活性化され、関連する記憶も伝播的に活性化
4. 記憶のフィードバック: 成功/失敗に応じて記憶の品質を向上
5. 自動減衰: 経過時間に応じて記憶の重要度を低下させ、不要な記憶を整理